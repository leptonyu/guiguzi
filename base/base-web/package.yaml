_common: !include "../../common.yaml"
name:                base-web
<<: *legal

dependencies:
  - base >= 4.11 && < 5
  - aeson
  - base-client
  - boots-app
  - consul
  - containers
  - data-default
  - ekg-core
  - exceptions
  - http-types
  - microlens
  - monad-logger
  - mtl
  - opentracing
  - reflection
  - salak
  - servant-server
  - servant-swagger
  - servant-swagger-ui
  - swagger2
  - text
  - unordered-containers
  - vault
  - wai
  - warp


library:
  source-dirs: src
  exposed-modules:
  - Base.Web
  - Base.Health
  - Base.Actuator
  - Base.Metrics
  
  other-modules:
  - Base.Web.Types
  - Base.Web.Swagger
  
  - Base.Middleware.Actuator
  - Base.Middleware.Trace
  - Base.Middleware.Error 
  - Base.Middleware.Consul
  
  - Base.Actuator.Metrics
  - Base.Actuator.Health
  - Base.Actuator.Refresh
  - Base.Actuator.Info
  - Base.Actuator.Logger
    
tests:
  spec:
    main: Spec.hs
    source-dirs:
      - test
      - src
    dependencies:
      - hspec == 2.*
      - QuickCheck < 2.14
